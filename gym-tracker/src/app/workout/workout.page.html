<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Workout
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Workout</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Workout Timer -->
  <div class="timer-section" *ngIf="isWorkoutActive">
    <ion-card>
      <ion-card-content>
        <div class="timer-display">
          <h2>{{ formatTime(workoutTimer) }}</h2>
          <p>Workout in progress</p>
        </div>
        <ion-button expand="block" fill="outline" color="danger" (click)="stopWorkout()">
          <ion-icon name="stop" slot="start"></ion-icon>
          Stop Workout
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Start Workout Section -->
  <div class="start-section" *ngIf="!isWorkoutActive">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Ready to workout? ðŸ’ª</ion-card-title>
        <ion-card-subtitle>Choose your workout type</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="block" fill="solid" color="primary" (click)="startWorkout('strength')">
          <ion-icon name="barbell" slot="start"></ion-icon>
          Strength Training
        </ion-button>
        <ion-button expand="block" fill="outline" color="secondary" (click)="startWorkout('cardio')">
          <ion-icon name="heart" slot="start"></ion-icon>
          Cardio
        </ion-button>
        <ion-button expand="block" fill="outline" color="tertiary" (click)="startWorkout('flexibility')">
          <ion-icon name="body" slot="start"></ion-icon>
          Flexibility
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Current Exercise -->
  <div class="current-exercise" *ngIf="isWorkoutActive && currentExercise">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Current Exercise</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="exercise-info">
          <h3>{{ currentExercise.name }}</h3>
          <p>{{ currentExercise.description }}</p>
          
          <div class="set-tracker">
            <ion-grid>
              <ion-row>
                <ion-col size="4">
                  <div class="set-item">
                    <h4>Sets</h4>
                    <ion-button size="small" fill="outline" (click)="decrementSets()">-</ion-button>
                    <span class="set-number">{{ currentSets }}</span>
                    <ion-button size="small" fill="outline" (click)="incrementSets()">+</ion-button>
                  </div>
                </ion-col>
                <ion-col size="4">
                  <div class="set-item">
                    <h4>Reps</h4>
                    <ion-button size="small" fill="outline" (click)="decrementReps()">-</ion-button>
                    <span class="set-number">{{ currentReps }}</span>
                    <ion-button size="small" fill="outline" (click)="incrementReps()">+</ion-button>
                  </div>
                </ion-col>
                <ion-col size="4">
                  <div class="set-item">
                    <h4>Weight</h4>
                    <ion-button size="small" fill="outline" (click)="decrementWeight()">-</ion-button>
                    <span class="set-number">{{ currentWeight }}kg</span>
                    <ion-button size="small" fill="outline" (click)="incrementWeight()">+</ion-button>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>
          
          <ion-button expand="block" fill="solid" color="success" (click)="completeSet()">
            <ion-icon name="checkmark" slot="start"></ion-icon>
            Complete Set
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Exercise List -->
  <div class="exercise-list" *ngIf="isWorkoutActive">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Workout Exercises</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let exercise of workoutExercises; let i = index" 
                    [class.active]="i === currentExerciseIndex"
                    (click)="selectExercise(i)">
            <ion-icon [name]="exercise.icon" slot="start" [color]="i === currentExerciseIndex ? 'primary' : 'medium'"></ion-icon>
            <ion-label>
              <h3>{{ exercise.name }}</h3>
              <p>{{ exercise.sets }} sets â€¢ {{ exercise.reps }} reps</p>
            </ion-label>
            <ion-badge slot="end" [color]="exercise.completed ? 'success' : 'warning'">
              {{ exercise.completed ? 'Done' : 'Pending' }}
            </ion-badge>
          </ion-item>
        </ion-list>
        
        <ion-button expand="block" fill="outline" (click)="addExercise()">
          <ion-icon name="add" slot="start"></ion-icon>
          Add Exercise
        </ion-button>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Workout Summary -->
  <div class="summary-section" *ngIf="!isWorkoutActive && completedWorkouts.length > 0">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Recent Workouts</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item *ngFor="let workout of completedWorkouts">
            <ion-icon name="fitness" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3>{{ workout.name }}</h3>
              <p>{{ workout.date | date:'MMM dd, yyyy' }} â€¢ {{ workout.duration }} min</p>
            </ion-label>
            <ion-badge slot="end" color="success">{{ workout.exercises.length }} exercises</ion-badge>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content> 